<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Green Engineer
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: "Inter", sans-serif;
    }
  </style>
 </head>
 <body class="min-h-screen bg-white relative">
  <img alt="White silk fabric background with soft folds and shadows" class="absolute inset-0 w-full h-full object-cover -z-10" height="1080" src="https://storage.googleapis.com/a1aa/image/9870eb9a-2777-4772-3fca-52511c19f9f1.jpg" width="1920"/>
  <div class="max-w-7xl mx-auto px-6 py-20 sm:py-24 md:py-28 lg:py-32 flex flex-col md:flex-row md:items-start md:justify-between gap-10">
   <div class="max-w-3xl flex flex-col gap-6">
    <p class="text-gray-700 text-lg font-normal uppercase tracking-wide">
     WELCOME TO,
    </p>
    <h1 class="text-gray-800 font-extrabold text-5xl sm:text-6xl md:text-7xl leading-tight uppercase">
     GREEN ENGINEER!
    </h1>
    <div>
     <p class="text-gray-700 font-extrabold text-xl uppercase mb-2">
      ADMINISTRASI :
     </p>
     <ul class="list-disc list-inside text-gray-700 font-extrabold text-xl">
      <li>
       Green Medicine Institute
      </li>
     </ul>
    </div>
   </div>
   <div class="flex flex-col items-center md:items-end gap-4">
    <img alt="Green Medicine Institute logo with hexagonal shape and stylized text in dark teal" class="w-40 h-40 object-contain" height="200" src="https://storage.googleapis.com/a1aa/image/e01543c9-6343-479b-ce17-9f5b680815bb.jpg" width="200"/>
   </div>
  </div>
  <div class="max-w-7xl mx-auto px-6">
   <div class="bg-[#4479c4] rounded-lg w-full max-w-xl p-6">
    <label class="block text-white font-extrabold text-lg mb-3" for="kirimtoken">
     isi Token Terbaru :
    </label>
    <div class="flex gap-4">
     <input class="flex-grow rounded-md px-4 py-2 text-lg" id="kirimtoken" placeholder="" type="text"/>
     <button onclick="cekToken()" class="bg-[#00b04b] rounded-md px-6 py-2 text-white font-bold text-lg" type="button">
      Submit
     </button>
    </div>
   </div>
  </div>
  <p class="max-w-7xl mx-auto px-6 text-xs text-gray-600 underline tracking-wide pt-6">
   NB : TOKEN HANYA BERLAKU 6 JAM! JIKA TOKEN HABIS SEGERA MELAPOR KE OPERATOR UTK VERIFIKSI ULNG TOKEN!
  </p>

 <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-analytics.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBggKVSzDyI-meBSL3BMjA736Ss-j_My0E",
    authDomain: "gmi-enterprise23.firebaseapp.com",
    projectId: "gmi-enterprise23",
    storageBucket: "gmi-enterprise23.firebasestorage.app",
    messagingSenderId: "974090028804",
    appId: "1:974090028804:web:43ae563ffd9433463c7251",
    measurementId: "G-S27YB5Z8PR"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  window.cekToken = async function() {
    const inputToken = document.getElementById('kirimtoken').value.trim();
    if (!inputToken) {
      alert("Token tidak boleh kosong");
      document.getElementById('kirimtoken').focus();
      return;
    }

    try {
      const tokenRef = doc(db, "tokenAdmin", "tokenDoc");
      const tokenSnap = await getDoc(tokenRef);

      if (!tokenSnap.exists()) {
        alert("Token belum tersedia. Hubungi operator.");
        return;
      }

      const tokenData = tokenSnap.data();

      if (tokenData.token !== inputToken) {
        alert("Token salah atau tidak terdaftar.");
        return;
      }

      const expiryDate = tokenData.expiry?.toDate?.();
      if (!expiryDate || expiryDate < new Date()) {
        alert("Token sudah kadaluarsa. Silakan minta token baru.");
        return;
      }

      localStorage.setItem("adminToken", inputToken);
      alert("Login berhasil! Mengalihkan ke halaman administrator...");
      window.location.href = "administrator.html";
    } catch (err) {
      console.error("Error saat cek token:", err);
      alert("Terjadi kesalahan saat memeriksa token.");
    }
  };
</script>

 </body>
</html>
