<html class="scroll-smooth" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   GMI Official App
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <script type="module">
   import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-analytics.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";
  import { getFirestore, collection, query, where, orderBy, limit, onSnapshot, addDoc, serverTimestamp, deleteDoc, doc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
  import { getStorage, ref, uploadString, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-storage.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBggKVSzDyI-meBSL3BMjA736Ss-j_My0E",
    authDomain: "gmi-enterprise23.firebaseapp.com",
    projectId: "gmi-enterprise23",
    storageBucket: "gmi-enterprise23.firebasestorage.app",
    messagingSenderId: "974090028804",
    appId: "1:974090028804:web:43ae563ffd9433463c7251",
    measurementId: "G-S27YB5Z8PR"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // Redirect if not logged in
  onAuthStateChanged(auth, user => {
    if (!user) {
      window.location.href = "login.html";
    } else {
      window.currentUser = user;
      loadUserProfile();
      loadForumPosts();
    }
  });

  // Generate referral code (simple random 8 chars)
  function generateReferralCode() {
    return Math.random().toString(36).substring(2, 10).toUpperCase();
  }

  // Load user profile info from Firestore or create if not exist
  async function loadUserProfile() {
    const userDocRef = doc(db, "users", window.currentUser.uid);
    const userDocSnap = await getDoc(userDocRef);
    if (!userDocSnap.exists()) {
      // Create user doc
      const newReferral = generateReferralCode();
      await addDoc(collection(db, "users"), {
        id: window.currentUser.uid,
        name: window.currentUser.displayName || "User",
        email: window.currentUser.email,
        whatsapp: "",
        referralCode: newReferral,
        points: 0,
        createdAt: serverTimestamp()
      });
    } else {
      const data = userDocSnap.data();
      window.currentUserData = data;
      updateProfileUI(data);
    }
  }

  // Update profile UI
  function updateProfileUI(data) {
    document.getElementById("profile-points").textContent = data.points ?? 0;
    document.getElementById("profile-name").textContent = data.name ?? "";
    document.getElementById("profile-email").textContent = data.email ?? "";
    document.getElementById("profile-referral").textContent = data.referralCode ?? "";
  }

  // Forum posts container
  const forumPostsContainer = document.getElementById("forum-posts");

  // Load forum posts (only posts within 24 hours)
  function loadForumPosts() {
    const postsRef = collection(db, "posts");
    const now = Date.now();
    const dayAgo = now - 24 * 60 * 60 * 1000;

    // Query posts ordered by createdAt desc
    const q = query(postsRef, orderBy("createdAt", "desc"));

    onSnapshot(q, snapshot => {
      forumPostsContainer.innerHTML = "";
      snapshot.forEach(docSnap => {
        const post = docSnap.data();
        const createdAt = post.createdAt ? post.createdAt.toDate().getTime() : 0;
        if (createdAt < dayAgo) {
          // Delete expired post
          deleteDoc(doc(db, "posts", docSnap.id));
          return;
        }
        forumPostsContainer.appendChild(createPostElement(docSnap.id, post));
      });
    });
  }

  // Create post element
  function createPostElement(postId, post) {
    const postDiv = document.createElement("div");
    postDiv.className = "bg-white rounded-lg shadow p-4 mb-4";

    // Header: user name, date, time
    const dateObj = post.createdAt ? post.createdAt.toDate() : new Date();
    const dateStr = dateObj.toLocaleDateString();
    const timeStr = dateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

    const headerDiv = document.createElement("div");
    headerDiv.className = "flex justify-between text-sm text-gray-500 mb-2";
    headerDiv.innerHTML = `<div>${post.name}</div><div>${dateStr} ${timeStr}</div>`;
    postDiv.appendChild(headerDiv);

    // Content text
    const contentP = document.createElement("p");
    contentP.className = "mb-2 text-gray-800 whitespace-pre-wrap";
    contentP.textContent = post.text;
    postDiv.appendChild(contentP);

    // Image if any
    if (post.imageUrl) {
      const img = document.createElement("img");
      img.src = post.imageUrl;
      img.alt = `User post image uploaded by ${post.name}`;
      img.className = "rounded max-w-full max-h-60 object-contain mb-2";
      postDiv.appendChild(img);
    }

    // Actions: Like, Comment, Report
    const actionsDiv = document.createElement("div");
    actionsDiv.className = "flex items-center space-x-4 text-gray-600";

    // Like button
    const likeBtn = document.createElement("button");
    likeBtn.className = "flex items-center space-x-1 hover:text-blue-600 focus:outline-none";
    likeBtn.innerHTML = `<i class="fas fa-thumbs-up"></i> <span>${post.likes ? Object.keys(post.likes).length : 0}</span>`;
    likeBtn.onclick = () => toggleLike(postId);
    actionsDiv.appendChild(likeBtn);

    // Comment button
    const commentBtn = document.createElement("button");
    commentBtn.className = "flex items-center space-x-1 hover:text-green-600 focus:outline-none";
    commentBtn.innerHTML = `<i class="fas fa-comment"></i> <span>${post.comments ? Object.keys(post.comments).length : 0}</span>`;
    commentBtn.onclick = () => openCommentModal(postId);
    actionsDiv.appendChild(commentBtn);

    // Report button
    const reportBtn = document.createElement("button");
    reportBtn.className = "flex items-center space-x-1 hover:text-red-600 focus:outline-none";
    reportBtn.innerHTML = `<i class="fas fa-flag"></i> <span>Report</span>`;
    reportBtn.onclick = () => openReportOptions(postId);
    actionsDiv.appendChild(reportBtn);

    postDiv.appendChild(actionsDiv);

    return postDiv;
  }

  // Toggle like for current user
  async function toggleLike(postId) {
    if (!window.currentUser) return;
    const postRef = doc(db, "posts", postId);
    const postSnap = await getDoc(postRef);
    if (!postSnap.exists()) return;
    const post = postSnap.data();
    const likes = post.likes || {};
    if (likes[window.currentUser.uid]) {
      delete likes[window.currentUser.uid];
    } else {
      likes[window.currentUser.uid] = true;
    }
    await updateDoc(postRef, { likes });
  }

  // Modal elements
  const commentModal = document.getElementById("comment-modal");
  const commentModalContent = document.getElementById("comment-modal-content");
  const commentList = document.getElementById("comment-list");
  const commentInput = document.getElementById("comment-input");
  const commentSubmitBtn = document.getElementById("comment-submit-btn");
  const commentModalCloseBtn = document.getElementById("comment-modal-close");

  let currentCommentPostId = null;

  // Open comment modal
  function openCommentModal(postId) {
    currentCommentPostId = postId;
    commentInput.value = "";
    commentList.innerHTML = "Loading comments...";
    commentModal.classList.remove("hidden");
    loadComments(postId);
  }

  // Close comment modal
  commentModalCloseBtn.onclick = () => {
    commentModal.classList.add("hidden");
    currentCommentPostId = null;
  };

  // Load comments for a post
  function loadComments(postId) {
    const postRef = doc(db, "posts", postId);
    onSnapshot(postRef, docSnap => {
      if (!docSnap.exists()) {
        commentList.innerHTML = "<p class='text-gray-500'>Post not found.</p>";
        return;
      }
      const post = docSnap.data();
      const comments = post.comments || {};
      commentList.innerHTML = "";
      // Sort comments by timestamp ascending
      const sortedComments = Object.entries(comments).sort((a,b) => a[1].createdAt?.seconds - b[1].createdAt?.seconds);
      if (sortedComments.length === 0) {
        commentList.innerHTML = "<p class='text-gray-500'>No comments yet.</p>";
        return;
      }
      sortedComments.forEach(([commentId, comment]) => {
        const commentDiv = createCommentElement(postId, commentId, comment);
        commentList.appendChild(commentDiv);
      });
    });
  }

  // Create comment element with replies
  function createCommentElement(postId, commentId, comment) {
    const div = document.createElement("div");
    div.className = "border-b border-gray-200 py-2";

    const header = document.createElement("div");
    header.className = "flex justify-between text-xs text-gray-500 mb-1";
    const dateObj = comment.createdAt ? comment.createdAt.toDate() : new Date();
    const dateStr = dateObj.toLocaleDateString();
    const timeStr = dateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    header.textContent = `${comment.name} - ${dateStr} ${timeStr}`;
    div.appendChild(header);

    const textP = document.createElement("p");
    textP.className = "text-gray-700 mb-1 whitespace-pre-wrap";
    textP.textContent = comment.text;
    div.appendChild(textP);

    // Replies container
    const repliesDiv = document.createElement("div");
    repliesDiv.className = "ml-4 border-l border-gray-300 pl-3";

    if (comment.replies) {
      const sortedReplies = Object.entries(comment.replies).sort((a,b) => a[1].createdAt?.seconds - b[1].createdAt?.seconds);
      sortedReplies.forEach(([replyId, reply]) => {
        const replyDiv = document.createElement("div");
        replyDiv.className = "mb-1";

        const replyHeader = document.createElement("div");
        replyHeader.className = "flex justify-between text-xs text-gray-400";
        const rDateObj = reply.createdAt ? reply.createdAt.toDate() : new Date();
        const rDateStr = rDateObj.toLocaleDateString();
        const rTimeStr = rDateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        replyHeader.textContent = `${reply.name} - ${rDateStr} ${rTimeStr}`;
        replyDiv.appendChild(replyHeader);

        const replyText = document.createElement("p");
        replyText.className = "text-gray-600 whitespace-pre-wrap";
        replyText.textContent = reply.text;
        replyDiv.appendChild(replyText);

        repliesDiv.appendChild(replyDiv);
      });
    }
    div.appendChild(repliesDiv);

    // Reply button
    const replyBtn = document.createElement("button");
    replyBtn.className = "text-xs text-blue-600 hover:underline mt-1";
    replyBtn.textContent = "Reply";
    replyBtn.onclick = () => openReplyInput(postId, commentId, div);
    div.appendChild(replyBtn);

    return div;
  }

  // Open reply input below a comment
  function openReplyInput(postId, commentId, commentDiv) {
    // Prevent multiple reply inputs
    if (commentDiv.querySelector(".reply-input")) return;

    const replyInput = document.createElement("textarea");
    replyInput.className = "reply-input mt-1 w-full border border-gray-300 rounded p-1 text-sm";
    replyInput.rows = 2;
    replyInput.placeholder = "Write a reply...";

    const sendBtn = document.createElement("button");
    sendBtn.className = "mt-1 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700";
    sendBtn.textContent = "Send";

    sendBtn.onclick = async () => {
      if (!replyInput.value.trim()) return;
      if (!window.currentUser) return alert("You must be logged in to reply.");
      const postRef = doc(db, "posts", postId);
      const postSnap = await getDoc(postRef);
      if (!postSnap.exists()) return alert("Post not found.");
      const post = postSnap.data();
      const comments = post.comments || {};
      if (!comments[commentId]) return alert("Comment not found.");
      if (!comments[commentId].replies) comments[commentId].replies = {};
      const replyId = Date.now().toString();
      comments[commentId].replies[replyId] = {
        name: window.currentUser.displayName || "User",
        uid: window.currentUser.uid,
        text: replyInput.value.trim(),
        createdAt: serverTimestamp()
      };
      await updateDoc(postRef, { comments });
      replyInput.value = "";
      commentDiv.removeChild(replyInput);
      commentDiv.removeChild(sendBtn);
    };

    commentDiv.appendChild(replyInput);
    commentDiv.appendChild(sendBtn);
    replyInput.focus();
  }

  // Submit comment button
  commentSubmitBtn.onclick = async () => {
    if (!commentInput.value.trim()) return;
    if (!window.currentUser) return alert("You must be logged in to comment.");
    const postRef = doc(db, "posts", currentCommentPostId);
    const postSnap = await getDoc(postRef);
    if (!postSnap.exists()) return alert("Post not found.");
    const post = postSnap.data();
    const comments = post.comments || {};
    const commentId = Date.now().toString();
    comments[commentId] = {
      name: window.currentUser.displayName || "User",
      uid: window.currentUser.uid,
      text: commentInput.value.trim(),
      createdAt: serverTimestamp(),
      replies: {}
    };
    await updateDoc(postRef, { comments });
    commentInput.value = "";
  };

  // Report modal and options
  const reportModal = document.getElementById("report-modal");
  const reportOptionsDiv = document.getElementById("report-options");
  const reportModalCloseBtn = document.getElementById("report-modal-close");
  let currentReportPostId = null;

  function openReportOptions(postId) {
    currentReportPostId = postId;
    reportOptionsDiv.innerHTML = "";
    const reasons = [
      { label: "Spam", value: "spam" },
      { label: "Kekerasan Verbal", value: "verbal_abuse" },
      { label: "Konten Tidak Pantas", value: "inappropriate" },
      { label: "Lainnya", value: "other" }
    ];
    reasons.forEach(reason => {
      const btn = document.createElement("button");
      btn.className = "block w-full text-left px-4 py-2 hover:bg-gray-100";
      btn.textContent = reason.label;
      btn.onclick = () => sendReport(reason.label);
      reportOptionsDiv.appendChild(btn);
    });
    reportModal.classList.remove("hidden");
  }

  reportModalCloseBtn.onclick = () => {
    reportModal.classList.add("hidden");
    currentReportPostId = null;
  };

  // Send report to WhatsApp
  function sendReport(reason) {
    if (!currentReportPostId) return;
    const url = `https://wa.me/628119118047?text=${encodeURIComponent(`Report for post ID: ${currentReportPostId}\nReason: ${reason}`)}`;
    window.open(url, "_blank");
    reportModal.classList.add("hidden");
  }

  // Navigation SPA logic
  const mainContent = document.getElementById("main-content");
  const iframeContainer = document.getElementById("iframe-container");
  const iframe = document.getElementById("content-iframe");

  // Show iframe with given src
  function showIframe(src) {
    iframe.src = src;
    iframeContainer.classList.remove("hidden");
    mainContent.classList.add("hidden");
  }

  // Hide iframe and show SPA main content
  function hideIframe() {
    iframe.src = "";
    iframeContainer.classList.add("hidden");
    mainContent.classList.remove("hidden");
  }

  // Header menu toggle
  const menuBtn = document.getElementById("menu-btn");
  const menuDropdown = document.getElementById("menu-dropdown");

  menuBtn.onclick = () => {
    menuDropdown.classList.toggle("hidden");
  };

  // Close menu if clicked outside
  window.addEventListener("click", e => {
    if (!menuBtn.contains(e.target) && !menuDropdown.contains(e.target)) {
      menuDropdown.classList.add("hidden");
    }
  });

  // Menu options SPA navigation
  document.getElementById("menu-settings").onclick = () => {
    alert("Settings SPA page (not implemented)");
    menuDropdown.classList.add("hidden");
  };
  document.getElementById("menu-contact").onclick = () => {
    alert("Contact SPA page (not implemented)");
    menuDropdown.classList.add("hidden");
  };
  document.getElementById("menu-aboutapp").onclick = () => {
    showAboutApp();
    menuDropdown.classList.add("hidden");
  };
  document.getElementById("menu-rateus").onclick = () => {
    alert("Rate Us SPA page (not implemented)");
    menuDropdown.classList.add("hidden");
  };
  document.getElementById("menu-news").onclick = () => {
    alert("News or Updates SPA page (not implemented)");
    menuDropdown.classList.add("hidden");
  };

  // About App SPA content
  function showAboutApp() {
    hideIframe();
    mainContent.innerHTML = `
      <div class="p-6 max-w-4xl mx-auto bg-white rounded shadow">
        <h2 class="text-2xl font-semibold mb-4">Privacy Policy (Kebijakan Privasi)</h2>
        <p class="mb-4 text-gray-700">Menjelaskan bagaimana data pengguna dikumpulkan, digunakan, dan dilindungi.</p>
        <h2 class="text-2xl font-semibold mb-4">Terms of Service / Terms and Conditions (Syarat dan Ketentuan)</h2>
        <p class="mb-4 text-gray-700">Menetapkan aturan dan batasan penggunaan layanan.</p>
        <h2 class="text-2xl font-semibold mb-4">Cookie Policy</h2>
        <p class="mb-4 text-gray-700">Informasi tentang penggunaan cookie, pelacakan, dan opsi persetujuan pengguna.</p>
        <h2 class="text-2xl font-semibold mb-4">Disclaimer (Penafian)</h2>
        <p class="mb-4 text-gray-700">Menjelaskan batas tanggung jawab, terutama untuk layanan informasi atau konsultasi.</p>
        <h2 class="text-2xl font-semibold mb-4">End-User License Agreement (EULA)</h2>
        <p class="mb-4 text-gray-700">Perjanjian lisensi antara pengembang dan pengguna akhir aplikasi.</p>
      </div>
    `;
  }

  // Navigation buttons SPA or iframe
  document.getElementById("nav-home").onclick = () => {
    hideIframe();
    mainContent.innerHTML = `<iframe src="home.html" class="w-full h-full min-h-[600px]" title="Home Page"></iframe>`;
  };
  document.getElementById("nav-forum").onclick = () => {
    hideIframe();
    mainContent.innerHTML = forumPageHTML;
    loadForumPosts();
  };
  document.getElementById("nav-info").onclick = () => {
    showIframe("informasi.html");
  };
  document.getElementById("nav-about").onclick = () => {
    showIframe("tentang.html");
  };
  document.getElementById("nav-profile").onclick = () => {
    hideIframe();
    if (!window.currentUserData) {
      mainContent.innerHTML = `<p class="p-6 text-center text-gray-500">Loading profile...</p>`;
      loadUserProfile();
      return;
    }
    mainContent.innerHTML = `
      <div class="p-6 max-w-md mx-auto bg-white rounded shadow text-center">
        <div class="text-5xl font-extrabold text-blue-600 mb-4" id="profile-points">${window.currentUserData.points ?? 0}</div>
        <div class="text-xl font-semibold mb-1" id="profile-name">${window.currentUserData.name ?? ""}</div>
        <div class="text-gray-600 mb-2" id="profile-email">${window.currentUserData.email ?? ""}</div>
        <div class="flex justify-center items-center space-x-2">
          <span class="font-mono bg-gray-100 px-3 py-1 rounded select-all cursor-pointer" id="profile-referral">${window.currentUserData.referralCode ?? ""}</span>
          <button id="copy-referral" class="text-blue-600 hover:text-blue-800 focus:outline-none" title="Copy Referral Code"><i class="fas fa-copy"></i></button>
        </div>
      </div>
    `;
    document.getElementById("copy-referral").onclick = () => {
      const code = document.getElementById("profile-referral").textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert("Referral code copied to clipboard!");
      });
    };
  };

  // Forum page HTML (SPA)
  const forumPageHTML = `
    <div class="max-w-3xl mx-auto p-4">
      <div id="post-box" class="mb-6 bg-white rounded shadow p-4">
        <textarea id="post-text" rows="3" placeholder="Katakan sesuatu..." class="w-full border border-gray-300 rounded p-2 resize-none focus:outline-blue-500"></textarea>
        <div class="flex items-center justify-between mt-2">
          <label for="post-image" class="cursor-pointer text-blue-600 hover:text-blue-800 flex items-center space-x-1">
            <i class="fas fa-image"></i><span>Upload Gambar</span>
          </label>
          <input type="file" id="post-image" accept="image/*" class="hidden" />
          <button id="post-submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50" disabled>Posting</button>
        </div>
        <div id="post-image-preview" class="mt-2"></div>
      </div>
      <div id="forum-posts"></div>
    </div>
  `;

  // After DOM loaded
  window.addEventListener("DOMContentLoaded", () => {
    // Default to home page iframe
    document.getElementById("nav-home").click();

    // Enable post button only if text or image selected
    const postText = document.getElementById("post-text");
    const postImage = document.getElementById("post-image");
    const postSubmit = document.getElementById("post-submit");
    const postImagePreview = document.getElementById("post-image-preview");

    if (postText && postImage && postSubmit && postImagePreview) {
      function updatePostButton() {
        postSubmit.disabled = !postText.value.trim() && !postImage.files.length;
      }
      postText.addEventListener("input", updatePostButton);
      postImage.addEventListener("change", () => {
        updatePostButton();
        postImagePreview.innerHTML = "";
        if (postImage.files.length) {
          const file = postImage.files[0];
          const reader = new FileReader();
          reader.onload = e => {
            const img = document.createElement("img");
            img.src = e.target.result;
            img.alt = "Preview of image to be posted by user";
            img.className = "max-h-40 rounded";
            postImagePreview.appendChild(img);
          };
          reader.readAsDataURL(file);
        }
      });

      postSubmit.onclick = async () => {
        if (!window.currentUser) return alert("You must be logged in to post.");
        postSubmit.disabled = true;
        let imageUrl = null;
        if (postImage.files.length) {
          // Upload image to Imgur
          const file = postImage.files[0];
          const reader = new FileReader();
          reader.onload = async e => {
            const base64 = e.target.result.split(",")[1];
            try {
              const res = await fetch("https://api.imgur.com/3/image", {
                method: "POST",
                headers: {
                  Authorization: "Client-ID 0f3d0dc555fdb38",
                  "Content-Type": "application/json"
                },
                body: JSON.stringify({ image: base64, type: "base64", name: file.name })
              });
              const data = await res.json();
              if (data.success) {
                imageUrl = data.data.link;
                await savePost(imageUrl);
              } else {
                alert("Failed to upload image to Imgur.");
                postSubmit.disabled = false;
              }
            } catch (err) {
              alert("Error uploading image: " + err.message);
              postSubmit.disabled = false;
            }
          };
          reader.readAsDataURL(file);
        } else {
          await savePost(null);
        }
      };

      async function savePost(imageUrl) {
        const text = postText.value.trim();
        if (!text && !imageUrl) {
          alert("Please enter text or upload an image.");
          postSubmit.disabled = false;
          return;
        }
        try {
          await addDoc(collection(db, "posts"), {
            uid: window.currentUser.uid,
            name: window.currentUser.displayName || "User",
            text,
            imageUrl,
            likes: {},
            comments: {},
            createdAt: serverTimestamp()
          });
          postText.value = "";
          postImage.value = "";
          postImagePreview.innerHTML = "";
          postSubmit.disabled = false;
        } catch (err) {
          alert("Error posting: " + err.message);
          postSubmit.disabled = false;
        }
      }
    }
  });
  </script>
  <!-- Header -->
  <header class="flex justify-between items-center bg-white shadow px-4 py-3 sticky top-0 z-30">
   <div class="flex items-center space-x-3">
    <img alt="GMI Official Logo, stylized letters G M I in blue and white" class="w-10 h-10 rounded" height="40" src="https://storage.googleapis.com/a1aa/image/52992df4-470e-4ab3-edad-9338b535af3c.jpg" width="40"/>
    <span class="font-semibold text-xl text-blue-700 select-none">
     gmi official
    </span>
   </div>
   <div class="relative">
    <button aria-label="Open menu" class="text-gray-700 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 rounded p-1" id="menu-btn">
     <i class="fas fa-ellipsis-v fa-lg">
     </i>
    </button>
    <div class="hidden absolute right-0 mt-2 w-48 bg-white rounded shadow-lg border border-gray-200 text-gray-700 text-sm z-40" id="menu-dropdown">
     <button class="w-full text-left px-4 py-2 hover:bg-gray-100" id="menu-settings">
      Settings
     </button>
     <button class="w-full text-left px-4 py-2 hover:bg-gray-100" id="menu-contact">
      Contact
     </button>
     <button class="w-full text-left px-4 py-2 hover:bg-gray-100" id="menu-aboutapp">
      About Apps
     </button>
     <button class="w-full text-left px-4 py-2 hover:bg-gray-100" id="menu-rateus">
      Rate Us
     </button>
     <button class="w-full text-left px-4 py-2 hover:bg-gray-100" id="menu-news">
      News or Updates
     </button>
    </div>
   </div>
  </header>
  <!-- Main content area -->
  <div class="flex-1 flex flex-col overflow-hidden">
   <div class="hidden flex-1" id="iframe-container">
    <iframe class="w-full h-full border-0" id="content-iframe" src="" title="Content Frame">
    </iframe>
   </div>
   <main class="flex-1 overflow-auto bg-gray-50" id="main-content">
   </main>
  </div>
  <!-- Footer navigation -->
  <footer class="bg-white border-t border-gray-300 flex justify-around items-center py-2 fixed bottom-0 w-full z-30">
   <button aria-label="Beranda" class="flex flex-col items-center text-gray-600 hover:text-blue-600 focus:outline-none" id="nav-home">
    <i class="fas fa-home fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Beranda
    </span>
   </button>
   <button aria-label="Forum" class="flex flex-col items-center text-gray-600 hover:text-green-600 focus:outline-none" id="nav-forum">
    <i class="fas fa-comments fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Forum
    </span>
   </button>
   <button aria-label="Informasi" class="flex flex-col items-center text-gray-600 hover:text-indigo-600 focus:outline-none" id="nav-info">
    <i class="fas fa-info-circle fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Informasi
    </span>
   </button>
   <button aria-label="Tentang" class="flex flex-col items-center text-gray-600 hover:text-purple-600 focus:outline-none" id="nav-about">
    <i class="fas fa-info fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Tentang
    </span>
   </button>
   <button aria-label="Profil" class="flex flex-col items-center text-gray-600 hover:text-pink-600 focus:outline-none" id="nav-profile">
    <i class="fas fa-user fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Profil
    </span>
   </button>
  </footer>
  <!-- Comment Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50" id="comment-modal">
   <div class="bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto p-4 relative">
    <button aria-label="Close comments" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 focus:outline-none" id="comment-modal-close">
     <i class="fas fa-times fa-lg">
     </i>
    </button>
    <h3 class="text-xl font-semibold mb-3">
     Komentar
    </h3>
    <div class="mb-4 max-h-64 overflow-y-auto border border-gray-300 rounded p-2 bg-gray-50" id="comment-list">
    </div>
    <textarea class="w-full border border-gray-300 rounded p-2 resize-none focus:outline-blue-500 mb-2" id="comment-input" placeholder="Tulis komentar..." rows="3"></textarea>
    <button class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 disabled:opacity-50" id="comment-submit-btn">
     Kirim Komentar
    </button>
   </div>
  </div>
  <!-- Report Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50" id="report-modal">
   <div class="bg-white rounded-lg max-w-sm w-full p-4 relative">
    <button aria-label="Close report" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 focus:outline-none" id="report-modal-close">
     <i class="fas fa-times fa-lg">
     </i>
    </button>
    <h3 class="text-xl font-semibold mb-3">
     Laporkan Postingan
    </h3>
    <div class="flex flex-col space-y-2" id="report-options">
    </div>
   </div>
  </div>
 </body>
</html>
