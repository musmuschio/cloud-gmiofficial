<!DOCTYPE html>
<html>
<head>
  <title>Forum</title>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js"></script>
</head>
<body>
  <h2>Forum Status</h2>
  <a href="update.html">[+] Tambah Status</a>
  <div id="forum"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBfYHBRKTxjEtzCHst2tPuwHjJ1Vfyer8",
      authDomain: "gmi-official21-74326.firebaseapp.com",
      projectId: "gmi-official21-74326",
      storageBucket: "gmi-official21-74326.appspot.com",
      messagingSenderId: "496607636364",
      appId: "1:496607636364:web:5b8428ccdd952faa544a9",
      measurementId: "G-KJXBCY83M"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const forumDiv = document.getElementById("forum");

    async function loadStatuses() {
      const snapshot = await db.collection("statuses").orderBy("created", "desc").get();
      snapshot.forEach(doc => {
        const data = doc.data();
        const statusEl = document.createElement("div");
        statusEl.innerHTML = `
          <hr>
          <strong>${data.name}</strong><br>
          <p>${data.desc}</p>
        `;
        forumDiv.appendChild(statusEl);
      });
    }

    loadStatuses();
  </script>
</body>
</html>
